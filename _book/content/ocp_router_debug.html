
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Debugging the OpenShift 4.x Router Â· I code and I kube things</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fancybox/jquery.fancybox.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-web-header/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ocp_templates.html" />
    
    
    <link rel="prev" href="k3s_taint.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Introduction</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    What is this?
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Containers</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="mac_podman.html">
            
                <a href="mac_podman.html">
            
                    
                        <b>2.1.</b>
                    
                    Run podman on MacOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="alpine_oc_cli.html">
            
                <a href="alpine_oc_cli.html">
            
                    
                        <b>2.2.</b>
                    
                    Run OpenShift CLI on Alpine Linux
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Kubernetes</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="cluster_access_via_sa.html">
            
                <a href="cluster_access_via_sa.html">
            
                    
                        <b>3.1.</b>
                    
                    Accessing k8s with a service account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="iks_fsck.html">
            
                <a href="iks_fsck.html">
            
                    
                        <b>3.2.</b>
                    
                    IKS fsck errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="extract_tokenid.html">
            
                <a href="extract_tokenid.html">
            
                    
                        <b>3.3.</b>
                    
                    Extract token-id from KUBECONFIG
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="iks_kubelet_errors.html">
            
                <a href="iks_kubelet_errors.html">
            
                    
                        <b>3.4.</b>
                    
                    Debugging IKS kubelet errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="manual_se.html">
            
                <a href="manual_se.html">
            
                    
                        <b>3.5.</b>
                    
                    Manually creating service endpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="priv_mk8s.html">
            
                <a href="priv_mk8s.html">
            
                    
                        <b>3.6.</b>
                    
                    Run privileged deployments on microk8s
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="sample_ingress.html">
            
                <a href="sample_ingress.html">
            
                    
                        <b>3.7.</b>
                    
                    Sample TLS Ingress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="show_all.html">
            
                <a href="show_all.html">
            
                    
                        <b>3.8.</b>
                    
                    Show everying in a namespace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="svc_proxy.html">
            
                <a href="svc_proxy.html">
            
                    
                        <b>3.9.</b>
                    
                    Access a service via kube proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="k3s_taint.html">
            
                <a href="k3s_taint.html">
            
                    
                        <b>3.10.</b>
                    
                    Taint k3s masters for no user workloads
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">OpenShift</li>
        
        
    
        <li class="chapter active" data-level="4.1" data-path="ocp_router_debug.html">
            
                <a href="ocp_router_debug.html">
            
                    
                        <b>4.1.</b>
                    
                    Debugging the OpenShift 4.x Router
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="ocp_templates.html">
            
                <a href="ocp_templates.html">
            
                    
                        <b>4.2.</b>
                    
                    Managing Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="ocp_min_clo.html">
            
                <a href="ocp_min_clo.html">
            
                    
                        <b>4.3.</b>
                    
                    Example ClusterLogging and LogForwarding APIs
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Istio</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="istio_danglers.html">
            
                <a href="istio_danglers.html">
            
                    
                        <b>5.1.</b>
                    
                    Cleaning up dangling webhooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="ibmcloud_managed_istio_update.html">
            
                <a href="ibmcloud_managed_istio_update.html">
            
                    
                        <b>5.2.</b>
                    
                    IBM Cloud Managed Istio upgrade test script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="manual_istio_cleanup.html">
            
                <a href="manual_istio_cleanup.html">
            
                    
                        <b>5.3.</b>
                    
                    Manual Istio cleanup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="istio_sidecars.html">
            
                <a href="istio_sidecars.html">
            
                    
                        <b>5.4.</b>
                    
                    Debugging Istio sidecars
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">IBM Cloud</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="ibmcloud_force_csi.html">
            
                <a href="ibmcloud_force_csi.html">
            
                    
                        <b>6.1.</b>
                    
                    Force VPC default storage class off
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="7.1" >
            
                <a target="_blank" href="https://gist.github.com/jpapejr">
            
                    
                        <b>7.1.</b>
                    
                    Gists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" >
            
                <a target="_blank" href="https://github.com/jpapejr?tab=repositories">
            
                    
                        <b>7.2.</b>
                    
                    Repos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../RESOURCES.html">
            
                <a href="../RESOURCES.html">
            
                    
                        <b>7.3.</b>
                    
                    Sample Resources
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Debugging the OpenShift 4.x Router</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="getting-openshift-router-access-logs">Getting OpenShift router access logs</h1>
<p><code>oc -n openshift-ingress-operator annotate ingresscontrollers/default ingress.operator.openshift.io/unsupported-logging=debug</code>
Will cause the ingress operator to inject a syslogd sidecar into the router deployment that will capture the router logs for debugging. Don&apos;t leave this in place, it&apos;s unsupported by RedHat and should only be used for troubleshooting issues. </p>
<h3 id="---this-info-is-somewhat-old-but-probably-still-valid----">--- This info is somewhat old, but probably still valid ---</h3>
<blockquote>
<p>This requires some manual gymnastics on Red Hat OpenShift</p>
<ol>
<li>Scale down the cluster-version-operator</li>
<li>Then the ingress-operator per this <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1776392#c6" target="_blank">link</a>.</li>
<li>Get a syslogd pod/service up like <a href="https://www.me2digital.com/blog/2017/09/syslog-receiver/" target="_blank">this</a>.</li>
</ol>
<p>This doesn&apos;t work well on IBM Cloud right now because the CVO runs on the managed master nodes which means end-users cannot scale it down.. The result is that, while you can down the OpenShift Ingress Operator just fine, the CVO will restore it shortly thereafter, wiping out your debugging env vars/config.</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="k3s_taint.html" class="navigation navigation-prev " aria-label="Previous page: Taint k3s masters for no user workloads">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="ocp_templates.html" class="navigation navigation-next " aria-label="Next page: Managing Templates">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Debugging the OpenShift 4.x Router","level":"4.1","depth":1,"next":{"title":"Managing Templates","level":"4.2","depth":1,"path":"content/ocp_templates.md","ref":"content/ocp_templates.md","articles":[]},"previous":{"title":"Taint k3s masters for no user workloads","level":"3.10","depth":1,"path":"content/k3s_taint.md","ref":"content/k3s_taint.md","articles":[]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","collapsible-chapters","hints","copy-code-button","back-to-top-button","fancybox","web-header","livereload"],"root":"/","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"webheader":{"headerTitle":"I code and I kube things"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"fancybox":{"helpers":{"buttons":{}},"openEffect":"elastic","closeEffect":"elastic"},"livereload":{},"web-header":{},"search":{},"collapsible-chapters":{},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"back-to-top-button":{},"copy-code-button":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"I code and I kube things","gitbook":"3.2.3"},"file":{"path":"content/ocp_router_debug.md","mtime":"2020-12-03T19:02:25.623Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-12-03T19:52:47.661Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.mousewheel.pack.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.fancybox.pack.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fancybox/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-web-header/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

